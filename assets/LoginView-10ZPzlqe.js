import{d as b,r as d,u as S,a as _,S as h,b as k,_ as A,o as c,c as p,e as f,f as e,w as i,v as r,g as F,F as C}from"./index-cgtOwIBa.js";const y=b({__name:"LoginView",setup(B,{expose:s}){s();const u=d(!1),o=d(!1),m=S(),n=d({email:"",password:"",nickname:"",cofpwd:""}),g={isLogin:u,isemail:o,router:m,SignPram:n,signinFn:async()=>{o.value=!1,n.value.email===""&&(o.value=!0);try{const l=await _.post(h,{email:n.value.email,password:n.value.password});if(l.data.status){const t=new Date;t.setDate(t.getDate()+1),document.cookie=`emptyTodo=${l.data.token}; expires=${t.toUTCString()}`,m.push("/")}}catch(l){const t=l.response.data;t.status||alert(t.message)}},signupFn:async()=>{try{if(o.value=!1,n.value.cofpwd===""||n.value.password!==n.value.cofpwd)throw new Error("密碼輸入有誤");(await _.post(k,{email:n.value.email,password:n.value.password,nickname:n.value.nickname})).data.status&&(alert("註冊成功"),u.value=!u.value)}catch(l){if(l.response){const t=l.response.data;t.status||alert(t.message)}else alert(l.message)}},reg:l=>{u.value=l}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),w="/week4-2/logo.png",v="/week4-2/img.png",P={key:0,id:"loginPage",class:"bg-yellow"},x={class:"conatiner loginPage vhContainer"},E=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:w,alt:""})]),e("img",{class:"d-m-n",src:v,alt:"workImg"})],-1),D={class:"formControls",action:"index.html"},U=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),V=e("label",{class:"formControls_label",for:"email"},"Email",-1),L=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),q={id:"signUpPage",class:"bg-yellow"},I={class:"conatiner signUpPage vhContainer"},T=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:w,alt:""})]),e("img",{class:"d-m-n",src:v,alt:"workImg"})],-1),N={class:"formControls",action:"index.html"},j=e("h2",{class:"formControls_txt"},"註冊帳號",-1),M=e("label",{class:"formControls_label",for:"email"},"Email",-1),O=e("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),R=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1),z=e("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1);function G(B,s,u,o,m,n){return c(),p(C,null,[f(" login_page "),o.isLogin?(c(),p(C,{key:1},[f(" sign up "),e("div",q,[e("div",I,[T,e("div",null,[e("form",N,[j,M,i(e("input",{class:"formControls_input",type:"text","onUpdate:modelValue":s[3]||(s[3]=a=>o.SignPram.email=a),id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[r,o.SignPram.email]]),O,i(e("input",{class:"formControls_input",type:"text","onUpdate:modelValue":s[4]||(s[4]=a=>o.SignPram.nickname=a),name:"name",id:"name",placeholder:"請輸入您的暱稱"},null,512),[[r,o.SignPram.nickname]]),R,i(e("input",{class:"formControls_input",type:"password","onUpdate:modelValue":s[5]||(s[5]=a=>o.SignPram.password=a),name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[r,o.SignPram.password]]),z,i(e("input",{class:"formControls_input",type:"password","onUpdate:modelValue":s[6]||(s[6]=a=>o.SignPram.cofpwd=a),name:"pwd",id:"pwd",placeholder:"請再次輸入密碼",required:""},null,512),[[r,o.SignPram.cofpwd]]),e("input",{class:"formControls_btnSubmit",type:"button",onClick:o.signupFn,value:"註冊帳號"}),e("a",{class:"formControls_btnLink",onClick:s[7]||(s[7]=a=>o.reg(!o.isLogin))},"登入")])])])])],2112)):(c(),p("div",P,[e("div",x,[E,e("div",null,[e("form",D,[U,V,i(e("input",{class:"formControls_input",type:"text",id:"email","onUpdate:modelValue":s[0]||(s[0]=a=>o.SignPram.email=a),name:"email",placeholder:"請輸入 email",required:""},null,512),[[r,o.SignPram.email]]),i(e("span",null,"此欄位不可留空",512),[[F,o.isemail]]),L,i(e("input",{class:"formControls_input",type:"password",name:"pwd","onUpdate:modelValue":s[1]||(s[1]=a=>o.SignPram.password=a),id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[r,o.SignPram.password]]),e("input",{class:"formControls_btnSubmit",type:"button",onClick:o.signinFn,value:"登入"}),e("a",{class:"formControls_btnLink",onClick:s[2]||(s[2]=a=>o.reg(!o.isLogin))},"註冊帳號")])])])]))],2112)}const Q=A(y,[["render",G],["__file","/app/src/views/LoginView.vue"]]);export{Q as default};
