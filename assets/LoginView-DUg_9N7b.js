import{d as b,r as d,u as S,a as _,S as h,b as A,_ as F,o as c,c as p,e as f,f as o,w as i,v as r,g as k,F as C}from"./index-WiFJd2iw.js";const y=b({__name:"LoginView",setup(B,{expose:e}){e();const u=d(!1),s=d(!1),m=S(),n=d({email:"",password:"",nickname:"",cofpwd:""}),g={isLogin:u,isemail:s,router:m,SignPram:n,signinFn:async()=>{s.value=!1,n.value.email===""&&(s.value=!0);try{const l=await _.post(h,{email:n.value.email,password:n.value.password});if(l.data.status){const t=new Date;t.setDate(t.getDate()+1),document.cookie=`emptyTodo=${l.data.token}; expires=${t.toUTCString()}`,m.push("/")}}catch(l){const t=l.response.data;t.status||alert(t.message)}},signupFn:async()=>{try{if(s.value=!1,n.value.cofpwd===""||n.value.password!==n.value.cofpwd)throw new Error("密碼輸入有誤");(await _.post(A,{email:n.value.email,password:n.value.password,nickname:n.value.nickname})).data.status&&(alert("註冊成功"),u.value=!u.value)}catch(l){if(l.response){const t=l.response.data;t.status||alert(t.message)}else alert(l.message)}},reg:l=>{u.value=l}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),w="/logo.png",v="/img.png",P={key:0,id:"loginPage",class:"bg-yellow"},x={class:"conatiner loginPage vhContainer"},E=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:w,alt:""})]),o("img",{class:"d-m-n",src:v,alt:"workImg"})],-1),D={class:"formControls",action:"index.html"},U=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),V=o("label",{class:"formControls_label",for:"email"},"Email",-1),L=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),q={id:"signUpPage",class:"bg-yellow"},I={class:"conatiner signUpPage vhContainer"},T=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:w,alt:""})]),o("img",{class:"d-m-n",src:v,alt:"workImg"})],-1),N={class:"formControls",action:"index.html"},j=o("h2",{class:"formControls_txt"},"註冊帳號",-1),M=o("label",{class:"formControls_label",for:"email"},"Email",-1),O=o("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),R=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),z=o("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1);function G(B,e,u,s,m,n){return c(),p(C,null,[f(" login_page "),s.isLogin?(c(),p(C,{key:1},[f(" sign up "),o("div",q,[o("div",I,[T,o("div",null,[o("form",N,[j,M,i(o("input",{class:"formControls_input",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>s.SignPram.email=a),id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[r,s.SignPram.email]]),O,i(o("input",{class:"formControls_input",type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>s.SignPram.nickname=a),name:"name",id:"name",placeholder:"請輸入您的暱稱"},null,512),[[r,s.SignPram.nickname]]),R,i(o("input",{class:"formControls_input",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>s.SignPram.password=a),name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[r,s.SignPram.password]]),z,i(o("input",{class:"formControls_input",type:"password","onUpdate:modelValue":e[6]||(e[6]=a=>s.SignPram.cofpwd=a),name:"pwd",id:"pwd",placeholder:"請再次輸入密碼",required:""},null,512),[[r,s.SignPram.cofpwd]]),o("input",{class:"formControls_btnSubmit",type:"button",onClick:s.signupFn,value:"註冊帳號"}),o("a",{class:"formControls_btnLink",onClick:e[7]||(e[7]=a=>s.reg(!s.isLogin))},"登入")])])])])],2112)):(c(),p("div",P,[o("div",x,[E,o("div",null,[o("form",D,[U,V,i(o("input",{class:"formControls_input",type:"text",id:"email","onUpdate:modelValue":e[0]||(e[0]=a=>s.SignPram.email=a),name:"email",placeholder:"請輸入 email",required:""},null,512),[[r,s.SignPram.email]]),i(o("span",null,"此欄位不可留空",512),[[k,s.isemail]]),L,i(o("input",{class:"formControls_input",type:"password",name:"pwd","onUpdate:modelValue":e[1]||(e[1]=a=>s.SignPram.password=a),id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[r,s.SignPram.password]]),o("input",{class:"formControls_btnSubmit",type:"button",onClick:s.signinFn,value:"登入"}),o("a",{class:"formControls_btnLink",onClick:e[2]||(e[2]=a=>s.reg(!s.isLogin))},"註冊帳號")])])])]))],2112)}const Q=F(y,[["render",G],["__file","/app/src/views/LoginView.vue"]]);export{Q as default};
